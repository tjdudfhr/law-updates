name: Update data.xml daily on: workflow_dispatch: schedule: - cron: '0 0 * * ' jobs: update: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 - name: Fetch XML run: | YEAR=$(date +%Y) URL="https://www.law.go.kr/DRF/lawSearch.do?OC={{ secrets.OC }}&target=eflaw&type=XML&efYd={YEAR}0101~${YEAR}1231&display=100&page=1" curl -s "$URL" > data_raw.xml sed -E 's/(OC=)[^&"<]/\1HIDDEN/g' data_raw.xml > data.xml rm -f data_raw.xml - name: Commit and push run: | git config user.name "github-actions[bot]" git config user.email "github-actions[bot]@users.noreply.github.com" git add data.xml git commit -m "Update data.xml" || echo "No changes to commit" git push
